(function(){function e(){let e="development",n=document.getElementById("application_id").value,t=document.getElementById("client_id").value;chrome.runtime.sendMessage({target:"BACKGROUND",type:"SAVE",mode:e,application_id:n,client_id:t},(function(e){console.log(e),document.getElementById("apis").style.display="block"}))}function n(){chrome.runtime.sendMessage({target:"BACKGROUND",type:"GET_USER_INFO"},(function(e){console.log("收到response:",e),document.getElementById("user_info").value=JSON.stringify(e)}))}function t(){chrome.runtime.sendMessage({target:"BACKGROUND",type:"LOGIN"},(function(e){console.log(e)}))}function o(){chrome.runtime.sendMessage({target:"BACKGROUND",type:"USER_MANAGE"},(function(e){console.log(e)}))}function i(e){chrome.runtime.sendMessage({target:"BACKGROUND",type:"PAY",price_id:e},(function(e){console.log(e)}))}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("apis").style.display="none",document.getElementById("save").addEventListener("click",(function(){e()})),document.getElementById("get_user_info").addEventListener("click",(function(){n()})),document.getElementById("open_login_page").addEventListener("click",(function(){t()})),document.getElementById("open_user_manage").addEventListener("click",(function(){o()})),document.getElementById("open_price_page").addEventListener("click",(function(){let e=document.getElementById("price_id").value;i(e)})),chrome.runtime.onMessage.addListener((function(e){"PRICE"===e.target&&"GET_USER_INFO"===e.type&&(document.getElementById("user_info").value=JSON.stringify(e.data))}))}))})();