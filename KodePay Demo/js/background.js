(function(){var e={150:function(e,t){var r,n,a;(function(o,s){n=[e],r=s,a="function"===typeof r?r.apply(t,n):r,void 0===a||(e.exports=a)})("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e){"use strict";if("object"!=typeof globalThis||"object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if("undefined"===typeof globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=e=>e&&"object"===typeof e&&"function"===typeof e.then,s=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},i=e=>1==e?"argument":"arguments",c=(e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${i(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${i(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((a,o)=>{if(t.fallbackToNoCallback)try{r[e](...n,s({resolve:a,reject:o},t))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,a()}else t.noCallback?(r[e](...n),a()):r[e](...n,s({resolve:a,reject:o},t))}))},u=(e,t,r)=>new Proxy(t,{apply(t,n,a){return r.call(n,e,...a)}});let l=Function.call.bind(Object.prototype.hasOwnProperty);const g=(e,t={},r={})=>{let n=Object.create(null),a={has(t,r){return r in e||r in n},get(a,o,s){if(o in n)return n[o];if(!(o in e))return;let i=e[o];if("function"===typeof i)if("function"===typeof t[o])i=u(e,e[o],t[o]);else if(l(r,o)){let t=c(o,r[o]);i=u(e,e[o],t)}else i=i.bind(e);else if("object"===typeof i&&null!==i&&(l(t,o)||l(r,o)))i=g(i,t[o],r[o]);else{if(!l(r,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get(){return e[o]},set(t){e[o]=t}}),i;i=g(i,t[o],r["*"])}return n[o]=i,i},set(t,r,a,o){return r in n?n[r]=a:e[r]=a,!0},defineProperty(e,t,r){return Reflect.defineProperty(n,t,r)},deleteProperty(e,t){return Reflect.deleteProperty(n,t)}},o=Object.create(e);return new Proxy(o,a)},m=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener(t,r){return t.hasListener(e.get(r))},removeListener(t,r){t.removeListener(e.get(r))}}),f=new a((e=>"function"!==typeof e?e:function(t){const r=g(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}));let p=!1;const A=new a((e=>"function"!==typeof e?e:function(t,n,a){let s,i,c=!1,u=new Promise((e=>{s=function(t){p||(console.warn(r,(new Error).stack),p=!0),c=!0,e(t)}}));try{i=e(t,n,s)}catch(m){i=Promise.reject(m)}const l=!0!==i&&o(i);if(!0!==i&&!l&&!c)return!1;const g=e=>{e.then((e=>{a(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"===typeof e.message)?e.message:"An unexpected error occurred",a({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return g(l?i:u),!0})),d=({reject:r,resolve:n},a)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?r(new Error(a.message)):n(a)},h=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${i(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${i(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const a=d.bind(null,{resolve:e,reject:t});n.push(a),r.sendMessage(...n)}))},x={devtools:{network:{onRequestFinished:m(f)}},runtime:{onMessage:m(A),onMessageExternal:m(A),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},g(e,x,n)};e.exports=n(chrome)}else e.exports=globalThis.browser}))}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}!function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();!function(){"use strict";var e=r(150),t=r.n(e);function n(){n=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,s=Object.create(o.prototype),i=new O(n||[]);return a(s,"_invoke",{value:w(e,r,i)}),s}function g(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var m={};function f(){}function p(){}function A(){}var d={};u(d,s,(function(){return this}));var h=Object.getPrototypeOf,x=h&&h(h(T([])));x&&x!==t&&r.call(x,s)&&(d=x);var y=A.prototype=f.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(a,o,s,i){var c=g(e[a],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,i)}))}i(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return S()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=k(s,r);if(i){if(i===m)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=g(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=g(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=A,a(y,"constructor",{value:A,configurable:!0}),a(A,"constructor",{value:p,configurable:!0}),p.displayName=u(A,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(b.prototype),u(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(y),u(y,c,"Generator"),u(y,s,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t,r,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){o(s,n,a,i,c,"next",e)}function c(e){o(s,n,a,i,c,"throw",e)}i(void 0)}))}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function c(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t,r){return m=g()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&l(a,r.prototype),a},m.apply(null,arguments)}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},f(e)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function h(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,f(Error));var t,r,n,a,o,s=(t=c,r=g(),function(){var e,n=u(t);if(r){var a=u(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return p(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).name="kodepay error",t.message=e,t}return n=c,a&&i(n.prototype,a),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}();c(x,"CONTENT_SCRIPT_NOT_LOADED","content script set up error: Please configure your manifest.json strictly according to the content script configuration in document_start"),c(x,"CREATE_API_KEY_ERROR","create uuid key error: please check the extension id"),c(x,"NO_STORAGE_PERMISSION","no storage in permissions, please add storage in permissions in manifest.json"),c(x,"GET_USER_INFO_ERROR","get user info error: please check your extension key and extension id, Finally, you can contact the developer for support"),c(x,"NO_ACCESS_KEY","no access key, please check your extension key and extension id, Finally, you can contact the developer for support"),c(x,"MODE_KEY_ERROR","mode must be development or production");const y=function(e,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"production",c="https://api.kodepay.io";if("development"===i)o=c+"/sandbox";else{if("production"!==i)throw new x(x.MODE_KEY_ERROR);o=c}var u=function(){try{return navigator.language}catch(e){return null}}(),l=function(){try{return t().runtime.id}catch(e){return null}}(),g="".concat(o,"/api/extension/new-key"),m="".concat(o,"/api/extension/user-managerment"),f="".concat(o,"/api/extension/user-info"),p="".concat(o,"/api/extension/search-order"),A="".concat(o,"/api/extension/make-order"),h="".concat(o,"/api/extension/loginpage"),y=r+"_user",v=r+"_ext_key",b="1.0.0",w=[],k="",_={};function E(){return O.apply(this,arguments)}function O(){return(O=s(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(h,{method:"POST"});case 2:if(!(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r.data.url);case 10:throw new x(t.status+t.statusText);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return S.apply(this,arguments)}function S(){return(S=s(n().mark((function e(t){var r,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={price_id:t},e.next=3,P(A,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 3:if(!(a=e.sent).ok){e.next=11;break}return e.next=7,a.json();case 7:return o=e.sent,e.abrupt("return",o.data);case 11:throw new x(a.status+a.statusText);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new Headers(n.headers||{});return a.append("application-id",e),a.append("language",u),a.append("plugin-id",l),a.append("client-id",r),a.append("api-key",k),a.append("app-version",b),n.headers=a,fetch(t,n)}function j(){return C.apply(this,arguments)}function C(){return(C=s(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(g,{method:"POST"});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Network request failed: ".concat(t.status," ").concat(t.statusText));case 6:return e.next=8,t.json();case 8:if(r=e.sent,1e5!==parseInt(r.code)){e.next=16;break}return a=r.data["api-key"],e.next=13,R(v,a);case 13:return e.abrupt("return",a);case 16:throw new Error("Failed to create API key: ".concat(r.message));case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(0),new x("".concat(x.CREATE_API_KEY_ERROR," ").concat(e.t0.message));case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function I(){return N.apply(this,arguments)}function N(){return(N=s(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(v);case 2:if(!(k=e.sent)){e.next=5;break}return e.abrupt("return",k);case 5:return e.next=7,j();case 7:return k=e.sent,e.abrupt("return",k);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return(L=s(n().mark((function e(r,a){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o={})[r]=a,e.prev=2,e.next=5,t().storage.sync.set(o);case 5:case 12:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,t().storage.local.set(o);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function M(e){return F.apply(this,arguments)}function F(){return(F=s(n().mark((function e(r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t().storage.sync.get(r);case 3:a=e.sent,e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,t().storage.local.get(r);case 10:a=e.sent;case 11:return e.abrupt("return",a[r]);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function D(){return G.apply(this,arguments)}function G(){return(G=s(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return B.apply(this,arguments)}function B(){return(B=s(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return k=e.sent,e.next=5,P(f,{method:"POST"});case 5:if(!(t=e.sent).ok){e.next=15;break}return e.next=9,t.json();case 9:return r=e.sent,e.next=12,R(y,r);case 12:return e.abrupt("return",r);case 15:throw new x(x.GET_USER_INFO_ERROR+t.status+t.statusText);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return null==e||""===e||!(!Array.isArray(e)||0!==e.length)||"object"===a(e)&&0===Object.keys(e).length||"number"==typeof e&&isNaN(e)}function Y(e,t,r){return K.apply(this,arguments)}function K(){return(K=s(n().mark((function e(r,a,o){var s,i,c,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t().windows||!t().windows.create){e.next=10;break}return e.next=3,t().windows.getCurrent();case 3:s=e.sent,i=Math.round((s.width-a)/2+s.left),c=Math.round((s.height-o)/2+s.top),u={url:r,left:i,top:c,type:"popup",width:a,height:o,focused:!0};try{t().windows.create(u)}catch(e){delete u.focused,t().windows.create(u)}e.next=11;break;case 10:window.open(r,"popup","scrollbars=no,resizable=yes,status=no,location=no,toolbar=no,menubar=no,titlebar=no,dependent=yes,width=".concat(a,",height=").concat(o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return W.apply(this,arguments)}function W(){return(W=s(n().mark((function e(t){var r,a,o,s,i,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_[t]||!_[t].status){e.next=24;break}if("uncompleted"!==_[t].status){e.next=21;break}return e.next=4,P(p,{body:JSON.stringify({transaction_id:t}),method:"POST",headers:{"Content-Type":"application/json"}});case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,o=parseInt(a.code),s=a.data,1e5!==o||s.transaction_id!==t){e.next=19;break}if("succeed"!==(i=s.pay_status)&&"failed"!==i){e.next=19;break}return _[t].status=i,_[t].Interval&&(clearInterval(_[t].Interval),_[t].Interval=null),e.next=17,D();case 17:c=e.sent,w.forEach((function(e){e(c,i)}));case 19:e.next=22;break;case 21:_[t].Interval&&(clearInterval(_[t].Interval),_[t].Interval=null);case 22:e.next=25;break;case 24:console.log("order not found");case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transaction_id,r=void 0===t?"":t,a=e.max_retries,o=void 0===a?6:a,i=e.retry_interval,c=void 0===i?3e3:i,u=e.timeout,l=void 0===u?2e4:u,g=0,m=Date.now(),f=setInterval(s(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(r);case 2:Date.now()-m>=l&&(console.info("Polling timed out"),clearInterval(f)),++g>o&&(console.info("Maximum retries exceeded"),clearInterval(f));case 6:case"end":return e.stop()}}),e)}))),c);return f}function Z(){return!(U(k)||U(e)||U(r))}function V(){return V=s(n().mark((function e(t){var r,a,o,s=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:1100,a=s.length>2&&void 0!==s[2]?s[2]:700,e.next=4,I();case 4:if(k=e.sent,Z()){e.next=7;break}throw new x(x.NO_ACCESS_KEY);case 7:return e.next=9,T(t);case 9:return o=e.sent,e.next=12,Y(o.url,r,a);case 12:_[o.transaction_id]={status:"uncompleted",Interval:z({transaction_id:o.transaction_id,max_retries:24,retry_interval:9e3,timeout:18e4,retries:0,start_time:Date.now()})};case 13:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function H(){return H=s(n().mark((function e(){var t,r,a,o=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1100,r=o.length>1&&void 0!==o[1]?o[1]:700,e.next=4,I();case 4:if(k=e.sent,Z()){e.next=7;break}throw new x(x.NO_ACCESS_KEY);case 7:return e.next=9,J();case 9:return a=e.sent,e.next=12,Y(a,t,r);case 12:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function J(){return Q.apply(this,arguments)}function Q(){return(Q=s(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(m,{method:"POST"});case 2:if(!(t=e.sent).ok){e.next=10;break}return e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r.data.url);case 10:throw new x(t.status+t.statusText);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return X=s(n().mark((function e(){var t,r,a,o=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1100,r=o.length>1&&void 0!==o[1]?o[1]:700,e.next=4,I();case 4:if(k=e.sent,Z()){e.next=7;break}throw new x(x.NO_ACCESS_KEY);case 7:return e.next=9,E();case 9:return a=e.sent,e.next=12,Y(a,t,r);case 12:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}return function(){if(U(e)||U(r))throw new x(x.NO_ACCESS_KEY);try{if(t().runtime.getManifest().permissions.includes("storage"))return!0}catch(n){throw new x(x.NO_STORAGE_PERMISSION)}throw new x(x.NO_STORAGE_PERMISSION)}(),t().runtime.onMessage.addListener(function(){var e=s(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("pay"===t.type&&t.data&&t.data.transaction_key&&_[t.data.transaction_key])){e.next=13;break}if(r=t.data.transaction_key,0!==parseInt(t.data.status)){e.next=7;break}_[r].status="failed",_[r].Interval&&clearInterval(_[r].Interval),e.next=13;break;case 7:if(1!==parseInt(t.data.status)){e.next=13;break}if("uncompleted"!==_[r].status){e.next=13;break}return _[r].Interval&&clearInterval(_[r].Interval),e.next=12,q(r);case 12:_[r].Interval=z({transaction_id:r,max_retries:6,retry_interval:3e3,timeout:2e4});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),{get_user_info:D,open_payment_page:function(e){return V.apply(this,arguments)},open_user_management_page:function(){return H.apply(this,arguments)},on_pay_completed:{addListener:function(e){w.push(e),function(){try{var e,r=d(t().runtime.getManifest().content_scripts);try{var n=function(){var t=e.value;if(t.matches.find((function(e){if(e.includes("".concat("https://kodepay.io","/*"))&&"document_start"===t.run_at)return!0})))return{v:void 0}};for(r.s();!(e=r.n()).done;){var o=n();if("object"===a(o))return o.v}}catch(s){r.e(s)}finally{r.f()}}catch(s){throw new x(x.CONTENT_SCRIPT_NOT_LOADED)}throw new x(x.CONTENT_SCRIPT_NOT_LOADED)}()}},open_login_page:function(){return X.apply(this,arguments)}}};let v=null;chrome.runtime.onMessage.addListener((function(e,t,r){if("BACKGROUND"===e.target)if("PAY"===e.type)v.open_payment_page(e.price_id),r({status:"OK"});else{if("SAVE"===e.type)return v=y(e.application_id,e.client_id,e.mode),!0;if("GET_USER_INFO"===e.type)v.get_user_info().then((e=>{console.log("get_user_info",e),chrome.runtime.sendMessage({target:"PRICE",type:"GET_USER_INFO",data:e})})),r("ok");else{if("LOGIN"===e.type)return v.open_login_page(),r("ok"),!0;if("USER_MANAGE"===e.type)return v.open_user_management_page(),r("ok"),!0}}}))}()})();